import json
import base64
import numpy as np
import cv2
from PIL import Image
import io

path ='path to json files'
image_path = 'path to store the downloaded images'
os.makedirs(image_path, exist_ok=True)

jsons = [x for x in os.listdir(path) if os.path.splitext(x)[-1] == '.json']
print(len(jsons))
print(jsons[0])

for j in jsons:
        # print(j)
    json_name = os.path.splitext(os.path.basename(j))[0]

    # Load the JSON file
    with open(os.path.join(path,j), 'r', encoding='utf8') as f:
        data = json.load(f)

    # Decode the image data
    image_data = data['imageData'].encode('utf-8')
    image = Image.open(io.BytesIO(base64.b64decode(image_data)))

    # Save the image as a PNG file
    image.save(f"{image_path}/{json_name}.jpg", quality=100)
